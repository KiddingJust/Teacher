<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 
<mapper namespace="mapper.BoardMapper">


<delete id="remove">
delete from tbl_board where bno=#{bno} 
</delete>


<insert id="create" parameterType="BoardVO">
insert into tbl_board (bno, title, content, writer)
values (seq_board.nextval, #{title}, #{content}, #{writer})
</insert>

	<select id="selectList"
	resultType="QuestionVO">
	
<![CDATA[
select *
from(select
/*+ INDEX_DESC (tbl_question pk_question) */
ROWNUM rn, qno, question, regdate, sysdate-(limittime/(24*60))-regdate
from tbl_question
where qno > 0 and ROWNUM <= (? * ?))
where rn > (?-1)*?;
]]>
	</select>
	
	<select id="selectPage" resultType="BoardVO">
	<![CDATA[
	select rownum bno, title, content, writer, regdate, updatedate, viewcnt
	from(
	select rownum rn, bno, title, content, writer, regdate, updatedate, viewcnt from tbl_board where rownum <= ( #{page} * #{size}) order by bno desc)
	where rn > (#{page}-1)* #{size}
	]]>
	</select>
</mapper>